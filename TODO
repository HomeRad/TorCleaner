TODO

- rework the HTML GUI using mini-tabs and styled checkboxes.

- padding error when password ends with equal sign?
  150, in check_credentials                                                                     
  res = check_digest_credentials(creds['Digest'][0], **attrs)                               
  File "C:\Python24\Lib\site-packages\wc\proxy\auth\digest.py", line                          
    101, in check_digest_credentials                                                              
    our_response = get_response_digest(credentials, **attrs)[2]                               
  File "C:\Python24\Lib\site-packages\wc\proxy\auth\digest.py", line                          
    187, in get_response_digest                                                                   
    password = base64.decodestring(attrs['password_b64'])                                     
  File "C:\Python24\lib\base64.py", line 317, in decodestring                                 
    return binascii.a2b_base64(s)                                                             
  binascii.Error: Incorrect padding        

- use privoxy's entries in default.action.master

- do not remove referrer but replace with a spoofed one, notably "http://www.google.com/"

- add privoxy's UNBLOCK_REFERRER entries to dontmatch list of referrer rule

- test ads domain filter disablement

- > 188, in get_response_digest
>     A1 = "%s:%s:%s" % (username, challenge['realm'], password)
> UnicodeDecodeError: 'ascii' codec can't decode byte 0xfa in position 2:  
> ordinal not in range(128)

- http://tracker.tradedoubler.com/click?p=3469&a=919547&url=http://www.apple.com/de/macmini

- Invalid content?
  From
  http://www.v-markt.de/angebote/aktuell/muenchen/muenchen.htm
  to
  http://www.v-markt.de/angebote/vorschau/muenchen/muenchen.htm
- Remove autostart and hidden in:
  <embed SRC="annoy.wav" autostart=true hidden=true>

- wc.proxy <client:receive  persistent server http://download.daemlich.net/no_hotlinkers33/volkswagen-getaway.mov> (32, 'Broken pipe')
Traceback (most recent call last):
  File "/home/calvin/projects/webcleaner/wc/proxy/Connection.py", line 126, in handle_write
    num_sent = self.send(data)
  File "/home/calvin/projects/webcleaner/wc/proxy/Dispatcher.py", line 350, in send
    raise                    
  File "/home/calvin/projects/webcleaner/wc/proxy/Dispatcher.py", line 342, in send
    result = self.socket.send(data)
error: (32, 'Broken pipe')   
Traceback (most recent call last):
  File "webcleaner", line 196, in ?
    main(sys.argv[1:])       
  File "webcleaner", line 192, in main
    return main_posix(configdir, filelogs, args)
  File "webcleaner", line 159, in main_posix
    wc.start.wstartfunc(confdir=configdir, filelogs=filelogs)
  File "/home/calvin/projects/webcleaner/wc/start.py", line 59, in wstartfunc
    wc.proxy.mainloop(handle=handle, abort=abort)
  File "/home/calvin/projects/webcleaner/wc/proxy/__init__.py", line 168, in mainloop
    proxy_poll(timeout=max(0, run_timers()))
  File "/home/calvin/projects/webcleaner/wc/proxy/__init__.py", line 122, in proxy_poll
    x.handle_read_event()    
  File "/home/calvin/projects/webcleaner/wc/proxy/Dispatcher.py", line 422, in handle_read_eve
nt                           
    self.handle_read()       
  File "/home/calvin/projects/webcleaner/wc/proxy/Connection.py", line 95, in handle_read
    self.process_read()      
  File "/home/calvin/projects/webcleaner/wc/proxy/HttpServer.py", line 214, in process_read
    if self.delegate_read(): 
  File "/home/calvin/projects/webcleaner/wc/proxy/StatefulConnection.py", line 34, in delegate
_read                        
    getattr(self, 'process_'+self.state)()
  File "/home/calvin/projects/webcleaner/wc/proxy/HttpServer.py", line 467, in process_content
    self.client.server_content(data)
  File "/home/calvin/projects/webcleaner/wc/proxy/HttpClient.py", line 516, in server_content
    assert self.server, "%s server_content(%r) had no server" % \
AssertionError: <client:closed   being read> server_content('\xfc\

- block *.stats.esomniture.com

- http://www.indianmasala.com/

- wc.proxy.dns <dns-lookup      im.a.hacker.la> DNS timeout
wc.proxy.dns <dns-lookup TCP  im.a.hacker.la retry #1> DNS timeout
wc.proxy.dns id 45796
opcode QUERY
rcode NOERROR
flags QR RD RA
;QUESTION
im.a.hacker.la. IN A
;ANSWER
im.a.hacker.la. 3600 IN A 66.252.11.28
;AUTHORITY
;ADDITIONAL was no response to id 63857
opcode QUERY
rcode NOERROR
flags RD
;QUESTION
im.a.hacker.la. IN A
;ANSWER
;AUTHORITY
;ADDITIONAL

- geht net: http://arp.ch/

- http://yro.slashdot.org/article.pl?sid=05/02/16/2341200&tid=158&tid=126
  oder
  http://www.msnbc.msn.com/id/6969798/

- use http://www.geocities.com/pierceive/adblock/

- Mac OS X support for network interface list:
  http://lists.helixcommunity.org/pipermail/client-dev/2004-May/001032.html

- SSL gateway is broken.
  Use case:
  https://bugzilla.mozilla.org/show_bug.cgi?id=217527

- Test "www.%s" DNS search pattern for automationpartnership.com

- add functional tests

invalid js url:
http://www.burstnet.com/cgi-bin/ads/ad8328a.cgi/v=2.0S/sz=468x60A|728x90A/65740/RETURN-CODE/JS/
http://adstome.com/phpads/adjs.php?n=864959011&what=zone:5&exclude=,

- squid uses an external auth configuration, we could use that too

- http://www.sane.com/demo/NetTracker/intranet/index.html
  JS navi not there

- ssl certificate verification

- memory leaks while operating the proxy

- allow filtering/blocking by MIME type

- bfilter has Flash parse and generation library, I want that too .)

- test NTLM authentication
  Mozilla >= 1.6b can test NTLM server auth, squid can test client auth

- NTLM: restore old method type when method was not GET

- NTLM: reconnect to parent proxy after first 407 error (squid closes
  the connection)

- unicode parsing for flex
  the HTML parser (written with flex) does not support unicode, so
  sometimes you'll see '?' chars in the HTML output.

- IPv6 support (there are some stubs already, but untested, and DNS
  library is missing IPv6 support)
  Big problem: how do we decide when to send out IPv6 DNS queries?

- use IPpy.py

- filter replace values should also have teh opportunity to use
  dynamic values, like the request domain url the complete URL.
  A use case would be referrer spoofing to use the request domain
  instead of a fixed value.

- suggestion from mail:
 filter lists from http://phroggy.com/bannerfilter/
 Check bannerfilter's update.sh for more infos.
 http://phroggy.com/bannerfilter/banners.data
 http://phroggy.com/bannerfilter/popups.data
 http://phroggy.com/bannerfilter/frames.data
 http://phroggy.com/bannerfilter/exceptions.data
 
 Also well known lists are in guarding.p2p format, for example
 available from:
 
 DIR_WWW="http://methlabs.org/sync"
 #Anti-P2P/ Ads/Spyware/ Govt/Military
 FILE_DL="guarding_all.p2p.zip"
 #Anti-P2P/ Ads/Spyware
 #FILE_DL="guarding_plus.p2p.zip"
 #Anti-P2P
 #FILE_DL="guarding.p2p.zip"
 #Ads/Spyware
 #FILE_DL="antiads.txt.zip"
 #Govt/Military
 #FILE_DL="govandmil.txt.zip"
 FILE_EX="guarding.p2p"

- Problem on WinXP box:
 The instance's SvcRun() method failed 
   File "C:\Python24\Lib\site-packages\win32\lib\win32serviceutil.py",
 line 715, in SvcRun
     self.SvcDoRun()
   File "C:\Python24\Lib\site-packages\wc\win32start.py", line 74, in
 SvcDoRun
     filelogs=self.filelogs)
   File "C:\Python24\Lib\site-packages\wc\start.py", line 59, in
 wstartfunc
     wc.proxy.mainloop(handle=handle, abort=abort)
   File "C:\Python24\Lib\site-packages\wc\proxy\__init__.py", line 168,
 in mainloop
     proxy_poll(timeout=max(0, run_timers()))
   File "C:\Python24\Lib\site-packages\wc\proxy\__init__.py", line 122,
 in proxy_poll
     x.handle_read_event()
   File "C:\Python24\Lib\site-packages\wc\proxy\Dispatcher.py", line 424,
 in handle_read_event
     self.handle_read()
   File "C:\Python24\Lib\site-packages\wc\proxy\Connection.py", line 95,
 in handle_read
     self.process_read()
   File "C:\Python24\Lib\site-packages\wc\proxy\dns_lookups.py", line
 567, in process_read
     callback(self.hostname, DnsResponse('found', ip_addrs)) 
 exceptions.TypeError: 'NoneType' object is not callable

- endless loop, 100% CPU
DEBUG wc.proxy poll result ([<dns-lookup TCP  www.robotstxt.org retry #4>], [], [])
DEBUG wc.proxy <dns-lookup TCP  www.robotstxt.org retry #4> poll handle read
DEBUG wc.proxy <dns-lookup TCP  www.robotstxt.org retry #4> Connection.handle_read
DEBUG wc.proxy <dns-lookup TCP  www.robotstxt.org retry #4> Connection.handle_close
DEBUG wc.proxy <dns-lookup TCP  www.robotstxt.org retry #4> Connection.delayed_close
DEBUG wc.proxy <dns-lookup TCP  www.robotstxt.org retry #4> close ready channel
DEBUG wc.proxy <dns-lookup TCP  www.robotstxt.org retry #4> closed, got empty data
DEBUG wc.proxy select with 0.206166 timeout:
DEBUG wc.proxy   <Listener:('', 8081)>
DEBUG wc.proxy   <Listener:('', 8444)>
DEBUG wc.proxy   <client:receive  persistent http://www.robotstxt.org/favicon.ico>
DEBUG wc.proxy   <dns-lookup TCP  www.robotstxt.org retry #4>
DEBUG wc.proxy   <dns-lookup      www.robotstxt.org>
DEBUG wc.proxy poll result ([<dns-lookup TCP  www.robotstxt.org retry #4>], [], [])
DEBUG wc.proxy <dns-lookup TCP  www.robotstxt.org retry #4> poll handle read
DEBUG wc.proxy <dns-lookup TCP  www.robotstxt.org retry #4> Connection.handle_read
DEBUG wc.proxy <dns-lookup TCP  www.robotstxt.org retry #4> Connection.handle_close
DEBUG wc.proxy <dns-lookup TCP  www.robotstxt.org retry #4> Connection.delayed_close
DEBUG wc.proxy <dns-lookup TCP  www.robotstxt.org retry #4> close ready channel
DEBUG wc.proxy <dns-lookup TCP  www.robotstxt.org retry #4> closed, got empty data
DEBUG wc.proxy select with 0.201074 timeout:
DEBUG wc.proxy   <Listener:('', 8081)>
DEBUG wc.proxy   <Listener:('', 8444)>
DEBUG wc.proxy   <client:receive  persistent http://www.robotstxt.org/favicon.ico>
DEBUG wc.proxy   <dns-lookup TCP  www.robotstxt.org retry #4>
DEBUG wc.proxy   <dns-lookup      www.robotstxt.org>
