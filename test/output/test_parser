test_parser
============ syntax tests =============
HTML '<a b="c">'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('a', {'b': 'c'})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML "<a b='c'>"
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('a', {'b': 'c'})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '<a b=c">'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('a', {'b': 'c'})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '<a b="c>'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
error (1, 2, "AttValue: ' expected\n")
startElement ('a', {'b': 'c&gt;'})
error (1, 2, "Couldn't find end of Start Tag a\n")
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '<a b="">'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('a', {'b': ''})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML "<a b=''>"
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('a', {'b': ''})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '<a b=>'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('a', {'b': ''})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '<a =c>'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
error (1, 2, 'error parsing attribute name\n')
startElement ('a', {})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '<a =>'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
error (1, 2, 'error parsing attribute name\n')
startElement ('a', {})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '<a b= "c">'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('a', {'b': 'c'})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '<a b ="c">'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('a', {'b': 'c'})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '<a b = "c">'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('a', {'b': 'c'})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '<a >'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('a', {})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '< a>'
setDocumentLocator ('documentlocator',)
startDocument ()
error (1, 1, 'htmlParseStartTag: invalid element name\n')
endDocument ()
HTML '< a >'
setDocumentLocator ('documentlocator',)
startDocument ()
error (1, 1, 'htmlParseStartTag: invalid element name\n')
endDocument ()
HTML '<>'
setDocumentLocator ('documentlocator',)
startDocument ()
error (1, 1, 'htmlParseStartTag: invalid element name\n')
endDocument ()
HTML '< >'
setDocumentLocator ('documentlocator',)
startDocument ()
error (1, 1, 'htmlParseStartTag: invalid element name\n')
endDocument ()
HTML '<a b=c"><a b="c">'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('a', {'b': 'c'})
endElement ('a',)
startElement ('a', {'b': 'c'})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '<a b="c><a b="c">'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
error (1, 2, 'error parsing attribute name\n')
startElement ('a', {'b': 'c&gt;&lt;a b=', 'c': None})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '<!---->'
setDocumentLocator ('documentlocator',)
startDocument ()
comment ('',)
endDocument ()
HTML '<!----->'
setDocumentLocator ('documentlocator',)
startDocument ()
comment ('-',)
endDocument ()
HTML '<!------>'
setDocumentLocator ('documentlocator',)
startDocument ()
comment ('--',)
endDocument ()
HTML '<!------->'
setDocumentLocator ('documentlocator',)
startDocument ()
comment ('---',)
endDocument ()
HTML '<!---- >'
setDocumentLocator ('documentlocator',)
startDocument ()
error (1, 5, 'Comment not terminated \n<!----\n')
endDocument ()
HTML '<!-- -->'
setDocumentLocator ('documentlocator',)
startDocument ()
comment (' ',)
endDocument ()
HTML '<!-- -- >'
setDocumentLocator ('documentlocator',)
startDocument ()
error (1, 6, 'Comment not terminated \n<!-- --\n')
endDocument ()
HTML '<!---- />-->'
setDocumentLocator ('documentlocator',)
startDocument ()
comment ('-- />',)
endDocument ()
HTML '</a>'
setDocumentLocator ('documentlocator',)
startDocument ()
error (1, 1, 'Unexpected end tag : a\n')
endDocument ()
HTML '</ a>'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('p', {})
characters (' a&gt;',)
endDocument ()
HTML '</ a >'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('p', {})
characters (' a &gt;',)
endDocument ()
HTML '</a >'
setDocumentLocator ('documentlocator',)
startDocument ()
error (1, 2, 'Unexpected end tag : a\n')
endDocument ()
HTML '< / a>'
setDocumentLocator ('documentlocator',)
startDocument ()
error (1, 1, 'htmlParseStartTag: invalid element name\n')
endDocument ()
HTML '< /a>'
setDocumentLocator ('documentlocator',)
startDocument ()
error (1, 1, 'htmlParseStartTag: invalid element name\n')
endDocument ()
HTML '<a/>'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('a', {})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '<!DOCTYPE adrbook SYSTEM "adrbook.dtd">'
setDocumentLocator ('documentlocator',)
startDocument ()
internalSubset ('adrbook', None, 'adrbook.dtd')
endDocument ()
HTML '<?xml version="1.0" encoding="latin1"?>'
setDocumentLocator ('documentlocator',)
startDocument ()
error (1, 1, 'htmlParseStartTag: invalid element name\n')
endDocument ()
HTML '<script >\n</script>'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('head', {})
startElement ('script', {})
cdataBlock ('\n',)
endElement ('script',)
endElement ('head',)
endElement ('html',)
endDocument ()
HTML '<sCrIpt lang="a">bla </a> fasel</scripT>'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('head', {})
startElement ('script', {'lang': 'a'})
cdataBlock ('bla ',)
error (1, 2, 'Unexpected end tag : a\n')
cdataBlock (' fasel',)
endElement ('script',)
endElement ('head',)
endElement ('html',)
endDocument ()
HTML '<img bo\\\nrder=0 >'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
error (1, 2, 'error parsing attribute name\n')
startElement ('img', {'bo': None, 'rder': '0'})
endElement ('body',)
endElement ('html',)
endDocument ()
======== sequential feed tests =========
HTML '<a b="c">'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('a', {'b': 'c'})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML "<a b='c'>"
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('a', {'b': 'c'})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '<a b=c">'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('a', {'b': 'c'})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '<a b="c>'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
error (1, 2, "AttValue: ' expected\n")
startElement ('a', {'b': 'c&gt;'})
error (1, 2, "Couldn't find end of Start Tag a\n")
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '<a b="">'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('a', {'b': ''})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML "<a b=''>"
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('a', {'b': ''})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '<a b=>'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('a', {'b': ''})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '<a =c>'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
error (1, 2, 'error parsing attribute name\n')
startElement ('a', {})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '<a =>'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
error (1, 2, 'error parsing attribute name\n')
startElement ('a', {})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '<a b= "c">'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('a', {'b': 'c'})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '<a b ="c">'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('a', {'b': 'c'})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '<a b = "c">'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('a', {'b': 'c'})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '<a >'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('a', {})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '< a>'
setDocumentLocator ('documentlocator',)
startDocument ()
error (1, 1, 'htmlParseStartTag: invalid element name\n')
endDocument ()
HTML '< a >'
setDocumentLocator ('documentlocator',)
startDocument ()
error (1, 1, 'htmlParseStartTag: invalid element name\n')
endDocument ()
HTML '<>'
setDocumentLocator ('documentlocator',)
startDocument ()
error (1, 1, 'htmlParseStartTag: invalid element name\n')
endDocument ()
HTML '< >'
setDocumentLocator ('documentlocator',)
startDocument ()
error (1, 1, 'htmlParseStartTag: invalid element name\n')
endDocument ()
HTML '<a b=c"><a b="c">'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('a', {'b': 'c'})
endElement ('a',)
startElement ('a', {'b': 'c'})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '<a b="c><a b="c">'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
error (1, 2, 'error parsing attribute name\n')
startElement ('a', {'b': 'c&gt;&lt;a b=', 'c': None})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '<!---->'
setDocumentLocator ('documentlocator',)
startDocument ()
comment ('',)
endDocument ()
HTML '<!----->'
setDocumentLocator ('documentlocator',)
startDocument ()
comment ('-',)
endDocument ()
HTML '<!------>'
setDocumentLocator ('documentlocator',)
startDocument ()
comment ('--',)
endDocument ()
HTML '<!------->'
setDocumentLocator ('documentlocator',)
startDocument ()
comment ('---',)
endDocument ()
HTML '<!---- >'
setDocumentLocator ('documentlocator',)
startDocument ()
error (1, 5, 'Comment not terminated \n<!----\n')
endDocument ()
HTML '<!-- -->'
setDocumentLocator ('documentlocator',)
startDocument ()
comment (' ',)
endDocument ()
HTML '<!-- -- >'
setDocumentLocator ('documentlocator',)
startDocument ()
error (1, 6, 'Comment not terminated \n<!-- --\n')
endDocument ()
HTML '<!---- />-->'
setDocumentLocator ('documentlocator',)
startDocument ()
comment ('-- />',)
endDocument ()
HTML '</a>'
setDocumentLocator ('documentlocator',)
startDocument ()
error (1, 1, 'Unexpected end tag : a\n')
endDocument ()
HTML '</ a>'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('p', {})
characters (' a&gt;',)
endDocument ()
HTML '</ a >'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('p', {})
characters (' a &gt;',)
endDocument ()
HTML '</a >'
setDocumentLocator ('documentlocator',)
startDocument ()
error (1, 2, 'Unexpected end tag : a\n')
endDocument ()
HTML '< / a>'
setDocumentLocator ('documentlocator',)
startDocument ()
error (1, 1, 'htmlParseStartTag: invalid element name\n')
endDocument ()
HTML '< /a>'
setDocumentLocator ('documentlocator',)
startDocument ()
error (1, 1, 'htmlParseStartTag: invalid element name\n')
endDocument ()
HTML '<a/>'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('a', {})
endElement ('a',)
endElement ('body',)
endElement ('html',)
endDocument ()
HTML '<!DOCTYPE adrbook SYSTEM "adrbook.dtd">'
setDocumentLocator ('documentlocator',)
startDocument ()
internalSubset ('adrbook', None, 'adrbook.dtd')
endDocument ()
HTML '<?xml version="1.0" encoding="latin1"?>'
setDocumentLocator ('documentlocator',)
startDocument ()
error (1, 1, 'htmlParseStartTag: invalid element name\n')
endDocument ()
HTML '<script >\n</script>'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('head', {})
startElement ('script', {})
cdataBlock ('\n',)
endElement ('script',)
endElement ('head',)
endElement ('html',)
endDocument ()
HTML '<sCrIpt lang="a">bla </a> fasel</scripT>'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('head', {})
startElement ('script', {'lang': 'a'})
cdataBlock ('bla ',)
error (1, 2, 'Unexpected end tag : a\n')
cdataBlock (' fasel',)
endElement ('script',)
endElement ('head',)
endElement ('html',)
endDocument ()
HTML '<img bo\\\nrder=0 >'
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
error (1, 2, 'error parsing attribute name\n')
startElement ('img', {'bo': None, 'rder': '0'})
endElement ('body',)
endElement ('html',)
endDocument ()
===== subsequent interwoven parsing ====
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
endElement ('html',)
endDocument ()
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
endElement ('html',)
endDocument ()
============= reset test ===============
setDocumentLocator ('documentlocator',)
startDocument ()
endDocument ()
============ flush tests ===============
FLUSH test <
setDocumentLocator ('documentlocator',)
startDocument ()
endDocument ()
FLUSH test <a
setDocumentLocator ('documentlocator',)
startDocument ()
startElement ('html', {})
startElement ('body', {})
startElement ('a', {})
error (1, 1, "Couldn't find end of Start Tag a\n")
endElement ('body',)
endElement ('html',)
endDocument ()
FLUSH test <!a
setDocumentLocator ('documentlocator',)
startDocument ()
endDocument ()
FLUSH test <?a
setDocumentLocator ('documentlocator',)
startDocument ()
error (1, 1, 'htmlParseStartTag: invalid element name\n')
endDocument ()
finished
