<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="copyright" content="(C) 2004 Bastian Kleineidam">
<link href="../wc.css" type="text/css" rel="Stylesheet">
<title>Rule macros</title>
</head>
<body>
<div class="content">
<h1>Rule macros...</h1>
<!-- macro definitions for rule editing
  Note: the TAL contexts from the calling templates are used here
 -->

<!-- title and description (used below) -->
<h2>Title and description</h2>
<table summary="">
<div metal:define-macro="titledesc">
<tr valign="top"><td>
<label for="rule_title" i18n:translate="">Title</label>:
</td><td>
<input type="text" class="text" name="rule_title" id="rule_title"
 value="Rule title" tal:attributes="value currule/title">
</td></tr>
<tr valign="top"><td>
<label for="rule_description" i18n:translate="">Description</label>:
</td><td>
<textarea name="rule_description" id="rule_description" cols="50" rows="5"
 tal:content="currule/desc">Rule description</textarea>
</td></tr>
</div>
</table>
<hr noshade size="1">

<!-- matchurl and dontmatchurl (used below) -->
<h2>Match url</h2>
<table summary="">
<div metal:define-macro="matchurl">
<tr valign="top"><td>
<label for="rule_matchurl" i18n:translate="">Match URL</label>:
</td><td>
<input type="text" class="text" name="rule_matchurl" id="rule_matchurl"
 value="Match url" tal:attributes="value currule/matchurl">
</td></tr>
<tr valign="top"><td>
<label for="rule_dontmatchurl" i18n:translate="">Don't match URL</label>:
</td><td>
<input type="text" class="text" name="rule_dontmatchurl" id="rule_dontmatchurl"
 value="Don't match url" tal:attributes="value currule/dontmatchurl">
</td></tr>
</div>
</table>
<hr noshade size="1">

<!-- url parts (used by AllowRule and BlockRule) -->
<h2>Url parts</h2>
<table summary="">
<div metal:define-macro="urlparts">
<tr valign="top"><td>
<label for="rule_url" i18n:translate="">URL</label>:
</td><td>
<input type="text" class="text" name="rule_url" value=""
 tal:attributes="value currule/url">
</td></tr>
</div>
</table>
<hr noshade size="1">

<!-- externfile (used by Allowdomains, Allowurls, Blockdomains, Blockurls) -->
<h2>Extern file</h2>
<table summary="">
<div metal:define-macro="externfile">
<tr valign="top"><td>
<span i18n:translate="">Title</span>:
</td><td>
<span tal:replace="currule/title">rule title</span>
</td></tr>
<tr valign="top"><td>
<span i18n:translate="">Description</span>:
</td><td>
<span tal:replace="currule/desc">rule description</span>
</td></tr>
<tr valign="top"><td>
<span i18n:translate="">Filename</span>:
</td><td>
<span tal:replace="currule/filename">/path/to/file</span>
</td></tr>
</div>
</table>
<hr noshade size="1">


<!-- Rule macros, each in a table tag -->

<!-- AllowRule -->
<h2>Allowrule</h2>
<table metal:define-macro="allow" summary="">
<tr metal:use-macro="rulemacros/macros/titledesc">
Rule title and description
</tr>
<tr metal:use-macro="rulemacros/macros/matchurl">
Rule (don't) match url
</tr>
<tr metal:use-macro="rulemacros/macros/urlparts">
Rule url parts
</tr>
<tr><td colspan="2">
<input type="submit" class="submit" name="apply" value="Apply"
 i18n:attributes="value Apply">
</td></tr>
</table>
<hr noshade size="1">

<!-- Allowdomains -->
<h2>Allowdomains</h2>
<table metal:define-macro="allowdomains" summary="">
<tr metal:use-macro="rulemacros/macros/externfile">
Extern file name allowdomains
</tr>
</table>
<hr noshade size="1">

<!-- Allowurls -->
<h2>Allowurls</h2>
<table metal:define-macro="allowurls" summary="">
<tr metal:use-macro="rulemacros/macros/externfile">
Extern file name allowurls
</tr>
</table>
<hr noshade size="1">

<!-- Blockdomains -->
<h2>Blockdomains</h2>
<table metal:define-macro="blockdomains" summary="">
<tr metal:use-macro="rulemacros/macros/externfile">
Extern file name blockdomains
</tr>
</table>
<hr noshade size="1">

<!-- Blockurls -->
<h2>Blockurls</h2>
<table metal:define-macro="blockurls" summary="">
<tr metal:use-macro="rulemacros/macros/externfile">
Extern file name blockurls
</tr>
</table>
<hr noshade size="1">

<!-- BlockRule -->
<h2>BlockRule</h2>
<table metal:define-macro="block" summary="">
<tr metal:use-macro="rulemacros/macros/titledesc">
Rule title and description
</tr>
<tr metal:use-macro="rulemacros/macros/matchurl">
Rule (don't) match url
</tr>
<tr metal:use-macro="rulemacros/macros/urlparts">
Rule url parts
</tr>
<tr valign="top"><td>
<label for="rule_replacement" i18n:translate="">Replacement URL</label>:
</td><td>
<input type="text" class="text" name="rule_replacement" id="rule_replacement"
 value="http://www.calvinandhobbes.com/"
 tal:attributes="value currule/replacement">
</td></tr>
<tr><td colspan="2">
<input type="submit" class="submit" name="apply" value="Apply"
 i18n:attributes="value Apply">
</td></tr>
</table>
<hr noshade size="1">

<!-- HeaderRule -->
<h2>HeaderRule</h2>
<table metal:define-macro="header" summary="">
<tr metal:use-macro="rulemacros/macros/titledesc">
Rule title and description
</tr>
<tr metal:use-macro="rulemacros/macros/matchurl">
Rule (don't) match url
</tr>
<tr valign="top"><td>
<label for="rule_headername" i18n:translate="">Header name</label>:
</td><td>
<input type="text" class="text" name="rule_headername" id="rule_headername"
 value="x-meta" tal:attributes="value currule/name">
</td></tr>
<tr valign="top"><td>
<label for="rule_headervalue" i18n:translate="">Header value</label>:
</td><td>
<input type="text" class="text" name="rule_headervalue" id="rule_headervalue"
 value="" tal:attributes="value currule/value">
</td></tr>
<tr><td colspan="2">
<input type="submit" class="submit" name="apply" value="Apply"
 i18n:attributes="value Apply">
</td></tr>
</table>
<hr noshade size="1">

<!-- ImageRule -->
<h2>ImageRule</h2>
<table metal:define-macro="image" summary="">
<tr metal:use-macro="rulemacros/macros/titledesc">
Rule title and description
</tr>
<tr metal:use-macro="rulemacros/macros/matchurl">
Rule (don't) match url
</tr>
<tr valign="top"><td>
<label for="rule_imgwidth" i18n:translate="">Image width</label>:
</td><td>
<input type="text" class="number" name="rule_imgwidth" id="rule_imgwidth"
 value="1" tal:attributes="value string:${currule/width}">
</td></tr>
<tr valign="top"><td>
<label for="rule_imgheight" i18n:translate="">Image height</label>:
</td><td>
<input type="text" class="number" name="rule_imgheight" id="rule_imgheight"
 value="1" tal:attributes="value string:${currule/height}">
</td></tr>
<!-- XXX todo: image type select -->
<tr valign="top"><td>
<label for="rule_imgurl" i18n:translate="">Blocked image URL</label>:
</td><td>
<input type="text" class="text" name="rule_imgurl" id="rule_imgurl"
 value="myblocked.gif" tal:attributes="value currule/url">
</td></tr>
<tr><td colspan="2">
<input type="submit" class="submit" name="apply" value="Apply"
 i18n:attributes="value Apply">
</td></tr>
</table>
<hr noshade size="1">

<!-- JavascriptRule -->
<h2>JavascriptRule</h2>
<table metal:define-macro="javascript" summary="">
<tr metal:use-macro="rulemacros/macros/titledesc">
Rule title and description
</tr>
<tr metal:use-macro="rulemacros/macros/matchurl">
Rule (don't) match url
</tr>
<tr><td colspan="2">
<input type="submit" class="submit" name="apply" value="Apply"
 i18n:attributes="value Apply">
</td></tr>
</table>
<hr noshade size="1">

<!-- NocommentsRule -->
<h2>NocommentsRule</h2>
<table metal:define-macro="nocomments" summary="">
<tr metal:use-macro="rulemacros/macros/titledesc">
Rule title and description
</tr>
<tr metal:use-macro="rulemacros/macros/matchurl">
Rule (don't) match url
</tr>
<tr><td colspan="2">
<input type="submit" class="submit" name="apply" value="Apply"
 i18n:attributes="value Apply">
</td></tr>
</table>
<hr noshade size="1">

<!-- PicsRule -->
<h2>PicsRule</h2>
<table metal:define-macro="pics" summary="">
<tr metal:use-macro="rulemacros/macros/titledesc">
Rule title and description
</tr>
<tr metal:use-macro="rulemacros/macros/matchurl">
Rule (don't) match url
</tr>
<tr valign="top"><td>
<label for="rule_fallback" i18n:translate="">Fallback URL</label>:
</td><td>
<input type="text" class="text" name="rule_fallback" id="rule_fallback"
 value="http://www..." tal:attributes="value currule/url">
</td></tr>
<tr valign="top"><td>
<span i18n:translate="">PICS ratings</span>:
</td><td>
<div tal:repeat="service pics_data/keys">
<input tal:condition="currule/ratings/?service"
 type="checkbox" tal:attributes="name string:service_${service}" checked ><input 
 tal:condition="not:currule/ratings/?service"
 type="checkbox" tal:attributes="name string:service_${service}">&nbsp;<span
 i18n:translate="">Service</span>&nbsp;<a href="http://imadoofus.com"
 tal:attributes="href pics_data/?service/home"
 tal:content="pics_data/?service/name">WebCleaner</a>
<br>
<div tal:condition="currule/ratings/?service"
 tal:repeat="category pics_data/?service/categories/keys"
 style="margin-left:30px;">
<input type="text" size="4"
 tal:attributes="name string:category_${service}_${category};value currule/ratings/?service/?category"
>&nbsp;<span
 i18n:translate="">Category</span>&nbsp;<span tal:content="pics_data/?service/categories/?category/name">adult</span>
</div>
</div>
</td>
</tr>
<tr><td colspan="2">
<input type="submit" class="submit" name="apply" value="Apply"
 i18n:attributes="value Apply">
</td></tr>
</table>
<hr noshade size="1">

<!-- ReplaceRule -->
<h2>ReplaceRule</h2>
<table metal:define-macro="replace" summary="">
<tr metal:use-macro="rulemacros/macros/titledesc">
Rule title and description
</tr>
<tr metal:use-macro="rulemacros/macros/matchurl">
Rule (don't) match url
</tr>
<tr valign="top"><td>
<label for="rule_search" i18n:translate="">Replace regex</label>:
</td><td>
<input type="text" class="text" name="rule_search" id="rule_search"
 value="A nasty word" tal:attributes="value currule/search">
</td></tr>
<tr valign="top"><td>
<label for="rule_replace" i18n:translate="">Replacement</label>:
</td><td>
<input type="text" class="text" name="rule_replace" id="rule_replace"
 value="Something good" tal:attributes="value currule/replace">
</td></tr>
<tr>
<td colspan="2">
<input type="submit" class="submit" name="apply" value="Apply"
 i18n:attributes="value Apply">
</td></tr>
</table>
<hr noshade size="1">

<!-- RewriteRule -->
<h2>RewriteRule</h2>
<table metal:define-macro="rewrite" summary="">
<tr metal:use-macro="rulemacros/macros/titledesc">
<td>Rule title and description</td>
</tr>
<tr metal:use-macro="rulemacros/macros/matchurl">
<td>Rule (don't) match url</td>
</tr>
<tr valign="top"><td>
<label for="rule_tag" i18n:translate="">Tag name</label>:
</td><td>
<input type="text" class="text" name="rule_tag" id="rule_tag" value="img"
 tal:attributes="value currule/tag">
</td></tr>
<tr valign="top"><td>
<span i18n:translate="">Attributes</span>:
</td><td>
<table rules="cols" cellpadding="2" cellspacing="0" border="0">
<thead>
<tr style="border-bottom:1px solid black;">
<td>&nbsp;</td>
<th i18n:translate="">Name</th>
<th i18n:translate="">Value</th>
</tr>
</thead>
<tbody>
<tr tal:repeat="attr currule/attrs/keys">
<td><input type="checkbox" name="delattr"
 tal:attributes="value attr">
</td>
<td tal:content="attr">href</td>
<td><div tal:content="currule/attrs/?attr" style="width:180px;overflow:auto;">bla</div></td>
</tr>
<tr tal:condition="not:currule/attrs">
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<span tal:condition="currule/attrs">
<input type="submit" class="submit" name="removeattrs" value="Remove selected"
 i18n:attributes="value Remove selected attributes">
</span>
</td></tr>
<tr valign="top"><td>
<label for="attrname" i18n:translate="">Name</label>:
</td><td>
<input type="text" class="text" name="attrname" id="attrname" value="href"
 tal:condition="not:currule/attrs">
<input type="text" class="text" name="attrname" id="attrname" value=""
 tal:condition="currule/attrs">
</td></tr>
<tr valign="top"><td>
<label for="attrval" i18n:translate="">Value</label>:
</td><td>
<input type="text" class="text" name="attrval" id="attrval" value="">
</td></tr>
<tr valign="top"><td>&nbsp;</td>
<td><input type="submit" class="submit" name="addattr"
 value="Add/replace attribute"
 i18n:attributes="value Add/replace attribute">
</td></tr>
<tr valign="top"><td>
<label for="rule_enclosedblock" i18n:translate="">Enclosed block</label>:
</td><td>
<input type="text" class="text" name="rule_enclosedblock"
 id="rule_enclosedblock" value="" tal:attributes="value currule/enclosed">
</td></tr>
<tr valign="top"><td>
<label for="rule_rewritepart" i18n:translate="">Replace part</label>:
</td><td>
<select name="rule_rewritepart">
<span tal:repeat="part partvalnames" tal:omit-tag="">
<option tal:condition="not:curparts/?part"
 tal:attributes="value part" tal:content="partnames/?part">a part</option>
<option tal:condition="curparts/?part" selected
 tal:attributes="value part" tal:content="partnames/?part">a part</option>
</span>
</select>
</td></tr>
<tr valign="top"><td>
<label for="rule_rewritereplacement" i18n:translate="">Replace value</label>:
</td><td>
<input type="text" class="text" name="rule_rewritereplacement" value=""
 id="rule_rewritereplacement" tal:attributes="value currule/replacement">
</td></tr>
<tr><td colspan="2">
<input type="submit" class="submit" name="apply" value="Apply"
 i18n:attributes="value Apply">
</td></tr>
</table>
<hr noshade size="1">

</body>
</html>
