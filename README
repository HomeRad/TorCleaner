            WebCleaner - a filtering HTTP proxy
	   =====================================


Features
--------
o HTTP/1.1 support
o integrated HTML parser, removes unwanted HTML (adverts, javascript, ...)
o integrated JavaScript engine, allows popup filtering
o compress documents on-the-fly (with gzip)
o disable animated GIFs
o filter images by size, removes certain banner adverts
o reduce images to low-bandwidth JPEGs
o remove/add/modify arbitrary HTTP headers
o usage of SquidGuard domain and url blacklists
o user/password protection with proxy authentication
  (requires HTTP/1.1 capable browser)
o per-host access control
o completely customizable over web interface


Installing
----------
Read the file INSTALL


Why should I use WebCleaner?
----------------------------
The first feature that set WebCleaner apart from other proxies is
real HTML filtering. It does not just replace some strings, the proxy
parses all HTML data into tags. The parser is a "real world" parser.
It is fast (written in C) and can cope with every broken HTML page out
there; if the parser does not recognize HTML structures, it just passes the
data over to the browser until it recognizes a tag again. No data is ever
discarded or dropped by the parser.

The second thing is the real Javascript filtering: Javascript data is
executed in the integrated Spidermonkey JS engine which is also used by
the Mozilla browser suite.
This eliminates all JavaScript obfuscation, popups, and document.write()
stuff, but the other JS functions still work as usual.


Configuration
-------------
Assuming your proxy runs on port 8080, point your browser to
http://localhost:8080/ to configure the proxy.
The underlying configuration format is a custom XML format which is
explained in config/filter.dtd and config/webcleaner.dtd.
Of course the default configuration is tuned to websites I visit
regularly. You can help me extend the current config data by sending
me patches!
If you installed from source or have the "webcleanertools" Debian
package installed, you can additionally run the GUI config tool
"webcleanerconf".


Running
-------
You can start the proxy by executing "webcleaner start".


Notes
-----
WebCleaner is _not_ a HTTP compliant proxy because it modifies requests,
headers and data! Modifications aside, the proxy tries to fulfill
the HTTP/1.1 specifications found in RFC 2616.

Surf performance will decrease, especially with the Rewriter and the
Replacer module enabled. It will decrease further with JavaScript
parsing enabled, since the proxy downloads and parses <script src="">
tags in the background.
WebCleaner is intended for a single user system; it does not scale well
beyond 5-10 users.

The Rewriter module parses the HTML. It optimizes HTML by making
tags and attribute names lowercase, quoting attribute values only
when necessary and removing some (but not all) ignorable whitespace.

The warning "unsupported content encoding" could lead to corrupted
HTML pages. WebCleaner tries to filter even unknown-encoded content
to prevent Denial of Service attacks (eg webservers sending always an
unknown content-encoding).
Currently, this affects only the "compress" or "x-compress" encoding,
because the LZW algorithm to uncompress such content is patented and
therefore not included in WebCleaner. See www.burnallgifs.org.


Credits
-------
The proxy code is based on the fourth incarnation of Amit's web proxy.

The filter code design is inspired from FilterProxy, a Perl program from
Bob McElrath <mcelrath+filterproxy@draal.physics.wisc.edu>.

Me, Bob and the author of AIFilter (Tels) had a nice discussion about
filter formats with good ideas. Tels convinced me to try stateful
filtering and I realize that it is very nice indeed.

Disabling animated GIFs is a question of honor, but the idea goes back to
the Webwasher.

The HTML parser is inspired from HotSAX.

CoAdvisor, for extracting all the important RFC stuff for non-caching
proxies in their test case documentation.


What you can do
---------------
- Send me urls with adverts WebCleaner is not filtering.
- Send me urls that do not display correctly in WebCleaner.
- Implement something on the TODO list and send me a patch.
