<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.3.1: http://docutils.sourceforge.net/" />
<title>simpleTAL i18n support</title>
<meta content="simpleTAL" name="navigation.name" />
<link rel="stylesheet" href="../wc.css" type="text/css" />
<link rel="stylesheet" href="../navigation.css" type="text/css" />
<script type="text/javascript">
window.onload = function() {
  if (top.location != location) {
    top.location.href = document.location.href;
  }
}
</script>
</head>
<body>
<!-- bfknav -->
Imagine a navigation
<!-- /bfknav -->
<div class="document" id="simpletal-i18n-support">
<h1 class="title">simpleTAL i18n support</h1>
<p>Did I already say that I liked <a class="reference" href="http://www.owlfish.com/software/simpleTAL/">simpleTAL</a>?
Yes, and that's why I have hacked in some i18n support into it.
It is a little hack of the still <a class="reference" href="http://dev.zope.org/Wikis/DevSite/Projects/ComponentArchitecture/ZPTInternationalizationSupport">unofficial i18n standard</a> and
is very limited.
Implementing any other i18n features lies not on my path, but I do accept
patches :)</p>
<div class="section" id="supported-features">
<h1><a name="supported-features">Supported features</a></h1>
<ul>
<li><p class="first"><tt class="literal"><span class="pre">i18n:translate</span></tt></p>
<p>If this attribute is specified with an empty string as the value, the
message ID is computed from the content of the element bearing this attribute.
Otherwise, the value has to be a <tt class="literal"><span class="pre">string:</span></tt> TALES expression whose
value forms the message ID.</p>
</li>
<li><p class="first"><tt class="literal"><span class="pre">i18n:attributes</span></tt></p>
<p>Specifies a list of attributes to be translated with message IDs for each.</p>
</li>
</ul>
<p>Furthermore, I made an improved pygettext.py (see below) that parses .html
files and puts the <tt class="literal"><span class="pre">i18n:</span></tt> tags into the gettext .po file.</p>
</div>
<div class="section" id="examples">
<h1><a name="examples">Examples</a></h1>
<p>Html template:</p>
<pre class="literal-block">
&lt;title i18n:translate=&quot;&quot;&gt;Hello english speaking friend&lt;/title&gt;
&lt;img i18n:attributes=&quot;alt English image description&quot;&gt;
&lt;div i18n:translate=&quot;string:This will be translated&quot;&gt;This will
be replaced by the translation&lt;/div&gt;
&lt;div i18n:translate=&quot;&quot;&gt;this is a %(parameter)s example&lt;/div&gt;
&lt;div i18n:translate=&quot;&quot;&gt;Also with &lt;b&gt;tags&lt;/b&gt; included&lt;/div&gt;
</pre>
<p>Example program:</p>
<pre class="literal-block">
from StringIO import StringIO
import sys, os, gettext
from wc.webgui.simpletal import simpleTAL, simpleTALES

def expand_template (f, context):
    &quot;&quot;&quot;expand the given template file in context return expanded data&quot;&quot;&quot;
    template = simpleTAL.compileHTMLTemplate(f)
    out = StringIO()
    LocaleDir = os.path.join(os.getcwd(), &quot;share&quot;, &quot;locale&quot;)
    Name = &quot;webcleaner&quot;
    translator = gettext.translation(Name, LocaleDir, [&quot;de&quot;])
    template.expand(context, out, translator=translator)
    data = out.getvalue()
    out.close()
    return data


def get_context ():
    # init and return TALES context
    context = simpleTALES.Context()
    context.addGlobal(&quot;parameter&quot;, &quot;hullabulla&quot;)
    return context


f = file(&quot;taltest.html&quot;)
print expand_template(f, get_context())
</pre>
</div>
<div class="section" id="diff-agains-simpletal-3-9">
<h1><a name="diff-agains-simpletal-3-9">Diff agains SimpleTAL 3.9</a></h1>
<p>See the diffs for <a class="reference" href="simpletal_i18n.diff">simpleTAL with i18n support</a> and
<a class="reference" href="pygettext_i18n.diff">pygettext.py with i18n support</a>.</p>
</div>
</div>
<hr class="footer" />
<div class="footer">
Generated on: 2004-05-05 20:23 UTC.
</div>
</body>
</html>
